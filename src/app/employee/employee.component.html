<app-sidebar>
  <!-- main content -->
  <div class="tab-content mt-3" id="myTabContent">
    <!-- positions table -->
    <div class="tab-pane fade show active" id="employees">
      <div class="mb-3 float-right">
        <div class="btn-group mr-2">
          <form class="form-inline my-2 my-lg-0 justify-content-center">
            <input name="searchTerm" #searchInput="ngModel" class="form-control mr-sm-2" ngModel (ngModelChange)="search(searchInput.value)"
                   type="search" placeholder="Search employees...">
          </form>
          <button  type="button" class="btn btn-info" data-toggle="modal" data-target="#addPositionModal"><i class="fa fa-plus"></i>&nbsp;New Employee</button>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-info" (click)="getEmployees(true, true)">
            <i class="fas fa-sync fa-spin" *ngIf="refreshing"></i><i class="fas fa-sync" *ngIf="!refreshing"></i>
          </button>
        </div>
      </div>
      <table class="table table-hover">
        <thead class="table-borderless">
        <tr class="text-center">
          <th>First name</th>
          <th>Last name</th>
          <th>Middle name</th>
          <th>Phone number</th>
          <th>Email</th>
          <th>Head</th>
          <th>Department</th>
        </tr>
        </thead>
        <tbody *ngFor="let employee of employees">
        <tr class="text-center">
          <td (click)="setSelectedEmployee(employee)">{{employee?.firstName}}</td>
          <td (click)="setSelectedEmployee(employee)">{{employee?.lastName}}</td>
          <td (click)="setSelectedEmployee(employee)">{{employee?.middleName}}</td>
          <td (click)="setSelectedEmployee(employee)">{{employee?.phoneNumber}}</td>
          <td (click)="setSelectedEmployee(employee)">{{employee?.email}}</td>
          <td (click)="setSelectedEmployee(employee)"><input name="head" type="checkbox" disabled [(ngModel)]="employee.head" class="form-check-input"></td>
          <td (click)="setSelectedEmployee(employee)">{{employeeDepartmentMap.get(employee)?.name}}</td>
          <td>
            <div class="btn-group">
              <button class="btn btn-outline-info" (click)="setEmployeeToUpdate(employee)"><i class="fas fa-edit"></i></button>
              <button class="btn btn-outline-danger" id="-delete-btn" data-toggle="modal" data-target="#deleteEmployeeModal"
                      (click)="setEmployeeToDelete(employee)"><i class="fas fa-trash"></i></button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <button [hidden]="true" type="button" id="open-employee-info-btn" data-toggle="modal" data-target="#viewEmployeeModal"></button>
  <button [hidden]="true" type="button" id="open-employee-update-btn" data-toggle="modal" data-target="#updateEmployeeModal"></button>

  <!--    modal delete user-->
  <div class="modal fade" id="deleteEmployeeModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModelLabel">Delete User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="close-employee-delete-modal">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete employee: {{employeeToDelete?.firstName}} {{employeeToDelete?.lastName}}?</p>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
            <button (click)="onDeleteEmployee(employeeToDelete.id)" class="btn btn-danger" data-bs-dismiss="modal">Yes</button>
          </div>
        </div>
      </div>
    </div>
  </div>



</app-sidebar>
